{% extends "core/base_okt.html" %}
{% load static %}
{% block content %}
    <div class="logout_btn">
        {% if request.user.is_superuser == True %}
            <a class="admin-link" href="{% url 'admin:index' %}">Административная панель</a>
        {% endif %}
        <p>Пользователь: {{ request.user.username }}</p>
        <a href="{% url "user:logout_admin" %}">Выход</a>
    </div>
    <div order={{ order }} class="specification-container">
        {% include "admin_specification/include/bread_crumbs.html" %}
        <h1 class="title">{{ title }}</h1>
        {{ bill_upd }}
        {% if order.bill_sum and bill_upd == None %}
            <div class="">
                <h4 style=" color: red; ">
                    ВНИМАНИЕ! ЕСТЬ ДЕЙСТВУЮЩИЙ СЧЕТ! ПРИ СОХРАНЕНИИ ИЗМЕНЕНИЙ В ЗАКАЗЕ БУДЕТ НЕОБХОДИМО СОЗДАТЬ СЧЕТ ЗАНОВО
                </h4>
            </div>
        {% endif %}
        {% if product or product_new %}
            <div class="spetification_table">
                <div class="spetification_titles">
                    <div class="title_item">Название:</div>
                    <div class="title_item">Остатки</div>
                    <div class="title_item">Цена за шт. в ₽:</div>
                    <div class="title_item">Количество:</div>
                    <div class="title_item">Стоимость:</div>
                    <div class="title_item">Стоимость Motrum:</div>
                    <div class="title_item">Доп.Скидка %:</div>
                    <div class="title_item">Срок поставки:</div>
                </div>
                {% for item in product %}
                    <div class="item_container"
                         data-vendor=""
                         data-product-name-new=""
                         data-product-id-cart="{{ item.id_product_cart }}"
                         data-product-pk="{{ item.pk }}"
                         data-id="{{ item.id_product_cart }}"
                         data-price="{% if bill_upd %} {{ item.old_price_one_full }} {% else %} {{ item.price.rub_price_supplier }} {% endif %}"
                         data-price-exclusive=" {% if item.price == "0" or item.price == "0.0" or item.price.extra_price == True %} 1 {% else %} 0 {% endif %} "
                         data-product-specification-id="{{ item.id_product_spesif }}"
                         data-multiplicity="{% if item.stock.is_one_sale %}1{% else %}{{ item.stock.order_multiplicity }}{% endif %}">
                        <div title="Удалить элемент" class="item_conainer-delete_btn">+</div>
                        <div class="item_value">
                            {{ item.name }}
                            <br>
                            <div class="article">Арт. {{ item.article_supplier }}</div>
                            <br>
                            <textarea style="width: 200px;
                                             height: 15px;
                                             border-radius: 5px"
                                      class="comment-input"
                                      name="comment-input-name"
                                      placeholder="Комментарий">{% if item.comment %}{{ item.comment }}{% endif %}</textarea>
                        </div>
                        <div class="item_value">
                            {% if item.stock %}
                                <div class="stock_item">
                                    {% if item.stock.to_order %}
                                        Поставщик:
                                        <br>
                                        Под заказ
                                    {% else %}
                                        {% if item.stock.stock_supplier != None %}
                                            Поставщик: <span class="supplier_unit">{{ item.stock.stock_supplier_unit }}</span> шт
                                        {% else %}
                                            Поставщик: -
                                        {% endif %}
                                    {% endif %}
                                </div>
                                <div class="stock_item">
                                    Motrum: <span class="motrum_unit">{{ item.stock.stock_motrum }}</span>
                                    {% if item.stock.stock_motrum_reserve %}
                                        Motrum резерв: <span class="motrum_unit_reserve">{{ item.stock.stock_motrum_reserve }}</span>
                                    {% endif %}
                                </div>
                                {% if item.stock.stock_supplier != None %}
                                    <span class="span-transit">{{ item.stock.data_update|date:"d.m.Y" }}</span>
                                    <br>
                                    <span class="span-transit">
                                        {% if item.stock.transit_count %}
                                            Ближайшая поставка: {{ item.stock.data_transit|date:"d.m.Y" }} - {{ item.stock.transit_count }} шт.
                                        {% endif %}
                                    </span>
                                {% endif %}
                            {% else %}
                                {% if item.stock.to_order %}Под заказ{% endif %}
                                Неизвестно
                            {% endif %}
                        </div>
                        {% comment %} {% if bill_upd %}
                            <!--если изменение счета главным админом-->
                            <div class="item_value">
                                <input class="price-input" name="price-input-extra" type="text" placeholder="Введите цену по запросу" maxlength="10" value = {{ item.old_price_one }} />
                                <label for="price-input-extra">
                                    <br>
                                    {% if item.old_price_one %}{{ item.old_date }} - {{ item.old_price_one }}{% endif %}
                                </label>
                            </div>
                            <div class="item_value input_quantity quantity">
                                <div class="input-container">
                                    <button class="minus-button">-</button>
                                    <input class="input-quantity" type="text" value={{ item.quantity }} oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="5" onkeypress='validate(event)'>
                                    <button class="plus-button">+</button>
                                </div>
                            </div>
                            <div class="item_value input_totla-cost total_cost price">0</div>
                    {% else %} {% endcomment %}
                        <!--обычное сохранение-->
                        {% if item.price.rub_price_supplier == 0 or item.price.rub_price_supplier == None or item.is_prise is None %}
                            <div class="item_value">
                                <input class="price-input"
                                       name="price-input-extra"
                                       type="text"
                                       placeholder="Введите цену по запросу"
                                       maxlength="10" />
                                <label for="price-input-extra">
                                    <br>
                                    {% if item.old_price_one %}{{ item.old_date }} - {{ item.old_price_one }}{% endif %}
                                </label>
                            </div>
                            <div class="item_value input_quantity quantity">
                                <div class="input-container">
                                    <button class="minus-button">-</button>
                                    <input class="input-quantity" type="text" value={{ item.quantity }} oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="5" onkeypress='validate(event)'>
                                    <button class="plus-button">+</button>
                                </div>
                            </div>
                            <div class="item_value input_totla-cost total_cost price">0</div>
                        {% else %}
                        
                            {% if bill_upd %}
                                <div class="item_value price price_once">{{ item.old_price_one_full }}</div>
                            {% else %}
                                <div class="item_value price price_once">{{ item.price.rub_price_supplier }}</div>
                            {% endif %}
                            <div class="item_value quantity">
                                <div class="input-container">
                                    <button class="minus-button">-</button>
                                    <input class="input-quantity" type="text" value={{ item.quantity }} oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="5" onkeypress='validate(event)'>
                                    <button class="plus-button">+</button>
                                </div>
                            </div>
                            <div class="item_value total_cost price"></div>
                        {% endif %}
                        {% comment %} {% endif %} {% endcomment %}
                        <div class="item_value">
                            <div price-motrum=" {% if item.price.price_motrum == 0 or item.price.price_motrum == None %} 0 {% else %} {% if bill_upd %} {{ item.old_price_one_motrum }}  {% else %} {{ item.price.price_motrum }} {% endif %} {% endif %}"
                                 class="price_motrum">
                                {% if item.price.price_motrum == 0 or item.price.price_motrum == None or item.is_prise is None %}
                                    0
                                {% else %}
                                    {% if bill_upd %}
                                        {{ item.old_price_one_motrum }}
                                    {% else %}
                                        {{ item.price.price_motrum }}
                                    {% endif %}
                                {% endif %}
                            </div>
                            <div class="">
                                {% if item.price.sale %}
                                    скидка <span class="motrum_sale_persent">{{ item.price.sale.percent }}</span>%
                                {% else %}
                                {% endif %}
                            </div>
                        </div>
                        <div class="item_value">
                            <input class="discount-input"
                                   type="text"
                                   name="price-input-discount"
                                   placeholder="% скидки"
                                   maxlength="6"
                                   value="{% if item.old_extra_discount %} {{ item.old_extra_discount }} {% endif %}" />
                            <label for="price-input-discount">
                                %
                                <br>
                                {% if item.old_extra_discount %}
                                    {{ item.old_extra_discount }}%
                                {% endif %}
                            </label>
                        </div>
                        <div class="item_value">
                            <label>
                                <span>Срок поставки</span>
                                {% if bill_upd %}
                                    <input placeholder="Укажите срок поставки"
                                           class="invoice-data-input"
                                           type="text"
                                           value="{{ item.text_delivery }}">
                                {% else %}
                                    <input class="delivery_date" type="date" name="calendar" min={{ current_date }}>
                                {% endif %}
                                {% comment %} <input class="delivery_date" type="date" name="calendar" min={{ current_date }}> {% endcomment %}
                            </label>
                        </div>
                    </div>
                {% endfor %}
                <!--товары без записи в бд уже есть в спецификации или нет-->
                {% for item in product_new %}
                    {% if update_spesif %}
                        <!--когда аптейдейт-->
                        <div class="item_container added_item_container"
                             data-vendor="{{ item.vendor.id }}"
                             data-product-pk=""
                             data-product-name-new="{{ item.product_new }}"
                             data-product-article-new="{{ item.product_new_article }}"
                             data-product-id-cart="{{ item.id_product_cart }}"
                             data-id="{{ item.id_product_cart }}"
                             data-price="{{ item.product_new_price }}"
                             data-price-exclusive="1"
                             data-product-specification-id="{{ item.id }}">
                            <div title="Удалить элемент" class="item_conainer-delete_btn">+</div>
                            <div class="change_icon_container">
                                <img src="{% static "core/images/changeIcon.svg" %}" alt="icon" />
                            </div>
                            <div class="item_value">
                                {{ item.product_new }}
                                <br>
                                <div class="article">Арт. {{ item.product_new_article }}</div>
                                <br>
                                <textarea style="width: 200px;
                                                 height: 15px;
                                                 border-radius: 5px"
                                          class="comment-input"
                                          name="comment-input-name"
                                          placeholder="Комментарий">{% if item.comment %}{{ item.comment }}{% endif %}</textarea>
                            </div>
                            <div class="item_value"></div>
                            {% if item.price.rub_price_supplier == 0 %}
                                <div class="item_value input_quantity quantity">
                                    <div class="input-container">
                                        <button class="minus-button">-</button>
                                        <input class="input-quantity" type="text" value={{ item.quantity }} oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="5" onkeypress='validate(event)'>
                                        <button class="plus-button">+</button>
                                    </div>
                                </div>
                                <div class="item_value">
                                    <input class="price-input"
                                           name="price-input-extra"
                                           type="text"
                                           placeholder="Введите цену по запросу"
                                           maxlength="10" />
                                    <label for="price-input-extra">
                                        {% if item.product_price_extra_old %}{{ item.data_old }} - {{ item.product_price_extra_old }}{% endif %}
                                    </label>
                                </div>
                                <div class="item_value input_totla-cost total_cost price">0</div>
                            {% else %}
                                <div class="item_value price price_once">{{ item.product_new_price }}</div>
                                <div class="item_value quantity">
                                    <div class="input-container">
                                        <button class="minus-button">-</button>
                                        <input class="input-quantity" type="text" value={{ item.quantity }} oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="5" onkeypress='validate(event)'>
                                        <button class="plus-button">+</button>
                                    </div>
                                </div>
                                <div class="item_value total_cost price"></div>
                            {% endif %}
                            <div class="item_value">
                                <div price-motrum="{% if item.price_motrum == 0 or item.price_motrum == None %}0{% else %}{{ item.price_motrum }}{% endif %}"
                                     class="price_motrum">
                                    {% if item.price_motrum == 0 or item.price_motrum == None or item.is_prise is None %}
                                        0
                                    {% else %}
                                        {{ item.price_motrum }}
                                    {% endif %}
                                </div>
                                <div class="">
                                    {% if item.product_new_sale_motrum %}
                                        скидка <span class="motrum_sale_persent">{{ item.product_new_sale_motrum }}</span>%
                                    {% else %}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="item_value">
                                <input class="discount-input"
                                       type="text"
                                       name="price-input-discount"
                                       placeholder="% скидки"
                                       maxlength="6"
                                       value=" {% if item.old_extra_discount %}{{ item.old_extra_discount }}{% endif %}" />
                                <label for="price-input-discount">
                                    %
                                    <br>
                                    {% if item.extra_discount %}
                                        {{ item.extra_discount }}%
                                    {% endif %}
                                </label>
                            </div>
                            <div class="item_value">
                                <label>
                                    <span>Срок поставки</span>
                                    {% if bill_upd %}
                                        <input placeholder="Укажите срок поставки"
                                               class="invoice-data-input"
                                               type="text"
                                               value="{{ item.text_delivery }}">
                                    {% else %}
                                        <input class="delivery_date" type="date" name="calendar" min={{ current_date }}>
                                    {% endif %}
                                    {% comment %} <input class="delivery_date" type="date" name="calendar" min={{ current_date }}> {% endcomment %}
                                </label>
                            </div>
                            <div class="change_item_container_wrapper">
                                <div class="change_item_container">
                                    <div class="change_item_container_value">
                                        <label class="name_label">
                                            <input placeholder="Имя товара" class="new_item_container_name_input" type="text" value={{ item.product_new }} />
                                            <div class="error"></div>
                                        </label>
                                        <label class="article_label">
                                            <input placeholder="Артикул товара" class="new_item_container_article_input" type="text" value={{ item.product_new_article }} />
                                            <div class="error"></div>
                                        </label>
                                        <label class="vedor_label">
                                            <select class="vendor_select" value="">
                                                <option value="" disabled selected>Выберете производителя</option>
                                                {% for vendor_item in vendor %}
                                                    <option value="{{ vendor_item.id }}"
                                                            {% if vendor_item.id == item.vendor.id %}selected{% endif %}>
                                                        {{ vendor_item.name }}
                                                    </option>
                                                {% endfor %}
                                            </select>
                                        </label>
                                    </div>
                                    <div class="change_item_container_value">
                                        <label class="price_once_label">
                                            <input placeholder="цена за 1шт" type="text" class="price_input" value={{ item.product_new_price }} />
                                            <div class="error"></div>
                                        </label>
                                    </div>
                                    <div class="change_item_container_value">
                                        <label class="quantity_label">
                                            <input placeholder="Количество" type="text" class="quantity_input" value={{ item.quantity }} />
                                            <div class="error"></div>
                                        </label>
                                    </div>
                                    <div class="change_item_container_value">
                                        <div class="change_item_container_value_total_cost">0</div>
                                    </div>
                                    <div class="change_item_container_value">
                                        <div class="change_item_container_value_motrum_price">0</div>
                                        <div>
                                            Cкидка
                                            <input class="persent_sale"
                                                   type="text"
                                                   placeholder="%"
                                                   value="{% if item.product_new_sale_motrum %}{{ item.product_new_sale_motrum }}{% endif %}" />
                                            %
                                        </div>
                                    </div>
                                    <div class="add_change_item_in_cart_container">
                                        <button class="add_new_item_in_cart">Изменить</button>
                                        <div class="add_new_item_in_cart_container_error"></div>
                                    </div>
                                    <div class="close-btn">+</div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <!--когда новая спецификация-->
                        <div class="item_container added_item_container"
                             data-vendor="{{ item.vendor.id }}"
                             data-product-pk="{{ item.id }}"
                             data-product-name-new="{{ item.product_new }}"
                             data-product-id-cart="{{ item.id }}"
                             data-product-article-new="{{ item.product_new_article }}"
                             data-id="{{ item.id }}"
                             data-price="{{ item.product_new_price }}"
                             data-price-exclusive="1"
                             data-product-specification-id="">
                            <div title="Удалить элемент" class="item_conainer-delete_btn">+</div>
                            <div class="change_icon_container">
                                <img src="{% static "core/images/changeIcon.svg" %}" alt="icon" />
                            </div>
                            <div class="item_value">
                                {{ item.product_new }}
                                <br>
                                <div class="article">Арт. {{ item.product_new_article }}</div>
                                <br>
                                <textarea style="width: 200px;
                                                 height: 15px;
                                                 border-radius: 5px"
                                          class="comment-input"
                                          name="comment-input-name"
                                          placeholder="Комментарий">{% if item.comment %}{{ item.comment }}{% endif %}</textarea>
                            </div>
                            <div class="item_value"></div>
                            {% if item.price.rub_price_supplier == 0 %}
                                <div class="item_value input_quantity quantity">
                                    <div class="input-container">
                                        <button class="minus-button">-</button>
                                        <input class="input-quantity" type="text" value={{ item.quantity }} oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="5" onkeypress='validate(event)'>
                                        <button class="plus-button">+</button>
                                    </div>
                                </div>
                                <div class="item_value">
                                    <input class="price-input"
                                           name="price-input-extra"
                                           type="text"
                                           placeholder="Введите цену по запросу"
                                           maxlength="10" />
                                    <label for="price-input-extra">
                                        {% if item.product_price_extra_old %}{{ item.data_old }} - {{ item.product_price_extra_old }}{% endif %}
                                    </label>
                                </div>
                                <div class="item_value input_totla-cost total_cost price">0</div>
                            {% else %}
                                <div class="item_value price price_once">{{ item.product_new_price }}</div>
                                <div class="item_value quantity">
                                    <div class="input-container">
                                        <button class="minus-button">-</button>
                                        <input class="input-quantity" type="text" value={{ item.quantity }} oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="5" onkeypress='validate(event)'>
                                        <button class="plus-button">+</button>
                                    </div>
                                </div>
                                <div class="item_value total_cost price"></div>
                            {% endif %}
                            <div class="item_value">
                                <div price-motrum="{% if item.price_motrum == 0 or item.price_motrum == None %}0{% else %}{{ item.price_motrum }}{% endif %}"
                                     class="price_motrum">
                                    {% if item.price_motrum == 0 or item.price_motrum == None %}
                                        0
                                    {% else %}
                                        {{ item.price_motrum }}
                                    {% endif %}
                                </div>
                                <div class="">
                                    {% if item.product_new_sale_motrum %}
                                        скидка <span class="motrum_sale_persent">{{ item.product_new_sale_motrum }}</span>%
                                    {% else %}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="item_value">
                                <input class="discount-input"
                                       type="text"
                                       name="price-input-discount"
                                       placeholder="% скидки"
                                       maxlength="6"
                                       value=" {% if item.old_extra_discount %}{{ item.old_extra_discount }}{% endif %}" />
                                <label for="price-input-discount">
                                    %
                                    <br>
                                    {% if item.old_extra_discount %}
                                        {{ item.old_extra_discount }}%
                                    {% endif %}
                                </label>
                            </div>
                            <div class="item_value">
                                <label>
                                    <span>Срок поставки</span>
                                    {% if bill_upd %}
                                        <input placeholder="Укажите срок поставки"
                                               class="invoice-data-input"
                                               type="text"
                                               value="{{ item.text_delivery }}">
                                    {% else %}
                                        <input class="delivery_date" type="date" name="calendar" min={{ current_date }}>
                                    {% endif %}
                                    {% comment %} <input class="delivery_date" type="date" name="calendar" min={{ current_date }}> {% endcomment %}
                                </label>
                            </div>
                            <div class="change_item_container_wrapper">
                                <div class="change_item_container">
                                    <div class="change_item_container_value">
                                        <label class="name_label">
                                            <input placeholder="Имя товара" class="new_item_container_name_input" type="text" value={{ item.product_new }} />
                                            <div class="error"></div>
                                        </label>
                                        <label class="article_label">
                                            <input placeholder="Артикул товара" class="new_item_container_article_input" type="text" value={{ item.product_new_article }} />
                                            <div class="error"></div>
                                        </label>
                                        <label class="vedor_label">
                                            <select class="vendor_select" value="">
                                                <option value="" disabled selected>Выберете производителя</option>
                                                {% for vendor_item in vendor %}
                                                    <option value="{{ vendor_item.id }}"
                                                            {% if vendor_item.id == item.vendor.id %}selected{% endif %}>
                                                        {{ vendor_item.name }}
                                                    </option>
                                                {% endfor %}
                                            </select>
                                        </label>
                                    </div>
                                    <div class="change_item_container_value">
                                        <label class="price_once_label">
                                            <input placeholder="цена за 1шт" type="text" class="price_input" value={{ item.product_new_price }} />
                                            <div class="error"></div>
                                        </label>
                                    </div>
                                    <div class="change_item_container_value">
                                        <label class="quantity_label">
                                            <input placeholder="Количество" type="text" class="quantity_input" value={{ item.quantity }} />
                                            <div class="error"></div>
                                        </label>
                                    </div>
                                    <div class="change_item_container_value">
                                        <div class="change_item_container_value_total_cost">0</div>
                                    </div>
                                    <div class="change_item_container_value">
                                        <div class="change_item_container_value_motrum_price">0</div>
                                        <div>
                                            Cкидка
                                            <input class="persent_sale"
                                                   type="text"
                                                   placeholder="%"
                                                   value="{% if item.product_new_sale_motrum %}{{ item.product_new_sale_motrum }}{% endif %}" />
                                            %
                                        </div>
                                    </div>
                                    <div class="add_change_item_in_cart_container">
                                        <button class="add_new_item_in_cart">Изменить</button>
                                        <div class="add_new_item_in_cart_container_error"></div>
                                    </div>
                                    <div class="close-btn">+</div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
                <!--товары без записи в бд при аплдете добавленные новые которых еще нет в спецификации-->
                {% for item in product_new_more %}
                    {% if update_spesif %}
                        <div class="item_container added_item_container"
                             data-vendor="{{ item.vendor.id }}"
                             data-product-pk=""
                             data-product-name-new="{{ item.product_new }}"
                             data-product-article-new="{{ item.product_new_article }}"
                             data-product-id-cart="{{ item.id }}"
                             data-id="{{ item.id }}"
                             data-price="{{ item.product_new_price }}"
                             data-price-exclusive="1"
                             data-product-specification-id="">
                            <div title="Удалить элемент" class="item_conainer-delete_btn">+</div>
                            <div class="change_icon_container">
                                <img src="{% static "core/images/changeIcon.svg" %}" alt="icon" />
                            </div>
                            <div class="item_value">
                                {{ item.product_new }}
                                <br>
                                <div class="article">Арт. {{ item.product_new_article }}</div>
                                <br>
                                <textarea style="width: 200px;
                                                 height: 15px;
                                                 border-radius: 5px"
                                          class="comment-input"
                                          name="comment-input-name"
                                          placeholder="Комментарий">{% if item.comment %}{{ item.comment }}{% endif %}</textarea>
                            </div>
                            <div class="item_value"></div>
                            {% if item.price.rub_price_supplier == 0 %}
                                <div class="item_value input_quantity quantity">
                                    <div class="input-container">
                                        <button class="minus-button">-</button>
                                        <input class="input-quantity" type="text" value={{ item.quantity }} oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="3" onkeypress='validate(event)'>
                                        <button class="plus-button">+</button>
                                    </div>
                                </div>
                                <div class="item_value">
                                    <input class="price-input"
                                           name="price-input-extra"
                                           type="text"
                                           placeholder="Введите цену по запросу"
                                           maxlength="10" />
                                    <label for="price-input-extra">
                                        {% if item.product_price_extra_old %}{{ item.data_old }} - {{ item.product_price_extra_old }}{% endif %}
                                    </label>
                                </div>
                                <div class="item_value input_totla-cost total_cost price">0</div>
                            {% else %}
                                <div class="item_value price price_once">{{ item.product_new_price }}</div>
                                <div class="item_value quantity">
                                    <div class="input-container">
                                        <button class="minus-button">-</button>
                                        <input class="input-quantity" type="text" value={{ item.quantity }} oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="5" onkeypress='validate(event)'>
                                        <button class="plus-button">+</button>
                                    </div>
                                </div>
                                <div class="item_value total_cost price"></div>
                            {% endif %}
                            <div class="item_value">
                                <div price-motrum="{% if item.price_motrum == 0 or item.price_motrum == None %}0{% else %}{{ item.price_motrum }}{% endif %}"
                                     class="price_motrum">
                                    {% if item.price_motrum == 0 or item.price_motrum == None or item.is_prise is None %}
                                        0
                                    {% else %}
                                        {{ item.price_motrum }}
                                    {% endif %}
                                </div>
                                <div class="">
                                    {% if item.product_new_sale_motrum %}
                                        скидка <span class="motrum_sale_persent">{{ item.product_new_sale_motrum }}</span>%
                                    {% else %}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="item_value">
                                <input class="discount-input"
                                       type="text"
                                       name="price-input-discount"
                                       placeholder="% скидки"
                                       maxlength="6"
                                       value=" {% if item.old_extra_discount %}{{ item.old_extra_discount }}{% endif %}" />
                                <label for="price-input-discount">
                                    %
                                    <br>
                                    {% if item.old_extra_discount %}
                                        {{ item.old_extra_discount }}%
                                    {% endif %}
                                </label>
                            </div>
                            <div class="item_value">
                                <label>
                                    <span>Срок поставки</span>
                                    {% if bill_upd %}
                                        <input placeholder="Укажите срок поставки"
                                               class="invoice-data-input"
                                               type="text"
                                               value="{{ item.text_delivery }}">
                                    {% else %}
                                        <input class="delivery_date" type="date" name="calendar" min={{ current_date }}>
                                    {% endif %}
                                    {% comment %} <input class="delivery_date" type="date" name="calendar" min={{ current_date }}> {% endcomment %}
                                </label>
                            </div>
                            <div class="change_item_container_wrapper">
                                <div class="change_item_container">
                                    <div class="change_item_container_value">
                                        <label class="name_label">
                                            <input placeholder="Имя товара" class="new_item_container_name_input" type="text" value={{ item.product_new }} />
                                            <div class="error"></div>
                                        </label>
                                        <label class="article_label">
                                            <input placeholder="Артикул товара" class="new_item_container_article_input" type="text" value={{ item.product_new_article }} />
                                            <div class="error"></div>
                                        </label>
                                        <label class="vedor_label">
                                            <select class="vendor_select" value="">
                                                <option value="" disabled selected>Выберете производителя</option>
                                                {% for vendor_item in vendor %}
                                                    <option value="{{ vendor_item.id }}"
                                                            {% if vendor_item.id == item.vendor.id %}selected{% endif %}>
                                                        {{ vendor_item.name }}
                                                    </option>
                                                {% endfor %}
                                            </select>
                                        </label>
                                    </div>
                                    <div class="change_item_container_value">
                                        <label class="price_once_label">
                                            <input placeholder="цена за 1шт" type="text" class="price_input" value={{ item.product_new_price }} />
                                            <div class="error"></div>
                                        </label>
                                    </div>
                                    <div class="change_item_container_value">
                                        <label class="quantity_label">
                                            <input placeholder="Количество" type="text" class="quantity_input" value={{ item.quantity }} />
                                            <div class="error"></div>
                                        </label>
                                    </div>
                                    <div class="change_item_container_value">
                                        <div class="change_item_container_value_total_cost">0</div>
                                    </div>
                                    <div class="change_item_container_value">
                                        <div class="change_item_container_value_motrum_price">0</div>
                                        <div>
                                            Cкидка
                                            <input class="persent_sale"
                                                   type="text"
                                                   placeholder="%"
                                                   value="{% if item.product_new_sale_motrum %}{{ item.product_new_sale_motrum }}{% endif %}" />
                                            %
                                        </div>
                                    </div>
                                    <div class="add_change_item_in_cart_container">
                                        <button class="add_new_item_in_cart">Изменить</button>
                                        <div class="add_new_item_in_cart_container_error"></div>
                                    </div>
                                    <div class="close-btn">+</div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
                <div class="new_item_container_wrapper">
                    <div>
                        <div class="new_item_container">
                            <div class="new_item_container_value">
                                <label class="name_label">
                                    <input placeholder="Имя товара"
                                           class="new_item_container_name_input"
                                           type="text" />
                                    <div class="error"></div>
                                </label>
                                <label class="article_label">
                                    <input placeholder="Артикул товара"
                                           class="new_item_container_article_input"
                                           type="text" />
                                    <div class="error"></div>
                                </label>
                                <label class="vedor_label">
                                    <select class="vendor_select" value="">
                                        <option value="" disabled selected>Выберете производителя</option>
                                        {% for vendor_item in vendor %}<option value="{{ vendor_item.id }}">{{ vendor_item.name }}</option>{% endfor %}
                                    </select>
                                </label>
                            </div>
                            <div class="new_item_container_value">
                                <label class="price_once_label">
                                    <input placeholder="цена за 1шт" type="text" class="price_input" />
                                    <div class="error"></div>
                                </label>
                            </div>
                            <div class="new_item_container_value">
                                <label class="quantity_label">
                                    <input placeholder="Количество" type="text" class="quantity_input" />
                                    <div class="error"></div>
                                </label>
                            </div>
                            <div class="new_item_container_value">
                                <div class="new_item_container_value_total_cost">0</div>
                            </div>
                            <div class="new_item_container_value">
                                <div class="new_item_container_value_motrum_price">0</div>
                                <div>
                                    Cкидка
                                    <input class="persent_sale" type="text" placeholder="%" />
                                    %
                                </div>
                            </div>
                            <div class="new_item_container_value">
                                <input class="add_sale" type="text" placeholder="%" />
                                <span>%</span>
                            </div>
                            <div class="new_item_container_value">
                                <label class="new_item_container_value_calendar_label">
                                    <span>Срок поставки</span>
                                    <input class="new_item_container_calendar" type="date" min={{ current_date }} />
                                    <div class="error"></div>
                                </label>
                            </div>
                            <div class="add_new_item_in_cart_container">
                                <button class="add_new_item_in_cart">Добавить товар</button>
                                <div class="add_new_item_in_cart_container_error"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="add_new_product_container">
                    <label class="search_label">
                        <div class="delete_search_details_btn">+</div>
                        <input class="search_input"
                               placeholder="Введите имя или артикул товара"
                               type="text" />
                        <div class="search_container"></div>
                    </label>
                    <div class="add_product_container">
                        <button class="add_product">Добавить этот товар</button>
                        <div class="add_product_error"></div>
                    </div>
                    <button class="add_new_product">Добавить новый товар</button>
                </div>
                <div class="coment_all_spesif">
                    <br>
                    <textarea style="width: 400px;
                                     height: 50px;
                                     border-radius: 10px"
                              class="comment-input-all"
                              name="comment-input-name-all"
                              placeholder="Комментарий к всему заказу">{% if specification.comment %}{{ specification.comment }}{% endif %}</textarea>
                    <textarea style="width: 200px;
                                     height: 50px;
                                     border-radius: 10px"
                              class="delivery-date-all-input-all"
                              name="delivery-date-all-input-name-all"
                              placeholder="Срок поставки для документа спецификации">{% if specification.date_delivery %}{{ specification.date_delivery }}{% endif %}</textarea>
                </div>
                <div class="submit-container">
                    <div class="price_description">
                        Итого: <span class="price">0</span> <span class="total-price-description">₽</span>
                    </div>
                    <div class="client">
                        <label class="serch-client">
                            <div class="client-prev">
                                <span>Клиент</span>
                                <input {% if bill_upd %}disabled{% endif %}
                                       type="text"
                                       name="serch-client_input"
                                       value="{% if client_req %}{{ client_req.requisites.legal_entity }}{% endif %}">
                            </div>
                            <div class="clients"></div>
                            <label class="select-client-requsits_label">
                                <span>Расчетный счет</span>
                                <select {% if bill_upd %}disabled{% endif %}
                                        class="select-client-requsits"
                                        {% if client_req %}value="{{ client_req.id }}"{% endif %}
                                        name="client-requisit">
                                    {% if client_req %}
                                        {% for recusits in client_req_all %}
                                            <option class="client-option"
                                                    {% if client_req.id == recusits.id %}selected{% endif %}
                                                    value="{{ recusits.id }}">
                                                {{ recusits.account_requisites }}
                                            </option>
                                        {% endfor %}
                                    {% endif %}
                                </select>
                            </label>
                            <div class="client-info">
                                {% if client_req %}
                                    <div>Предоплата: {{ client_req.requisites.prepay_persent }}%</div>
                                    <div>
                                        Доставка:
                                        <select {% if bill_upd %}disabled{% endif %}
                                                class="select_delevery"
                                                name='delevery-requisit'>
                                            <option {% if order.type_delivery == "pickup" %}selected{% endif %}
                                                    value="pickup">Самовывоз</option>
                                            <option {% if order.type_delivery == "paid_delivery" %}selected{% endif %}
                                                    value="paid_delivery">
                                                Доставка до терминала за счет покупателя
                                            </option>
                                        </select>
                                    </div>
                                {% endif %}
                            </div>
                        </label>
                        <label class="bitrix-id-label">
                            <span>Номер сделки Bitrix</span>
                            <input {% if bill_upd %}disabled{% endif %}
                                   class="bitrix-input"
                                   type="text"
                                   onkeypress='validate(event)'
                                   value="{% if order and order.id_bitrix %}{{ order.id_bitrix }}{% endif %}" />
                        </label>
                    </div>
                    <div class="motrum-info">
                        <label for="motrum-select">Юрлицо мотрум для сделки:</label>
                        <select {% if bill_upd %}disabled{% endif %}
                                class="select_motrum_requisites"
                                id="motrum-select"
                                style="height: 25px;
                                       border-radius: 10px"
                                name="mortum_req"
                                value="1"
                                value="1">
                            {% for requisit in mortum_req %}
                                <option {% if order and requisit.id == order.motrum_requisites.id %}selected{% endif %} data-requisites-id="{{ requisit.requisites.id }} " data-account-requisites-id="{{ requisit.id }}" value={{ requisit.id }}>
                                    Юр.лицо - {{ requisit.requisites.short_name_legal_entity }}- Расчетный счет -{{ requisit.account_requisites }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="button_specification-wrapper">
                        {% if bill_upd %}
                            <div class="save_upd_bill-wrapper">
                                <button class="save_upd_bill">Сохранить изменения в счете</button>
                                <div class="save_upd_bill-error"></div>
                            </div>
                            <button class="exit_button">Выйти без изменений</button>
                            {% comment %} {% if specification %}
                            {% else %}
                                <div class="save_order_button-wrapper">
                                    <button class="save_order_button">Сохранить корзину без заказа</button>
                                    <div class="save_order_button-error"></div>
                                </div>
                            {% endif %} {% endcomment %}
                        {% else %}
                            <div class="save_button-wrapper">
                                <button class="save_button">Сохранить спецификацию</button>
                                <div class="error"></div>
                            </div>
                            <div class="save_invoice_button-wrapper">
                                <button class="save_button">Сохранить только счет</button>
                                <div class="error"></div>
                            </div>
                            <button class="exit_button">Выйти без изменений</button>
                            {% if specification %}
                            {% else %}
                                <div class="save_order_button-wrapper">
                                    <button class="save_order_button">Сохранить корзину без заказа</button>
                                    <div class="save_order_button-error"></div>
                                </div>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>
        {% else %}
            <div class="no_content_container">
                <div class="new_item_container_wrapper">
                    <div>
                        <div class="new_item_container">
                            <div class="new_item_container_value">
                                <label class="name_label">
                                    <input placeholder="Имя товара"
                                           class="new_item_container_name_input"
                                           type="text" />
                                    <div class="error"></div>
                                </label>
                                <label class="article_label">
                                    <input placeholder="Артикул товара"
                                           class="new_item_container_article_input"
                                           type="text" />
                                    <div class="error"></div>
                                </label>
                                <label class="vedor_label">
                                    <select class="vendor_select" value="">
                                        <option value="" disabled selected>Выберете производителя</option>
                                        {% for vendor_item in vendor %}<option value="{{ vendor_item.id }}">{{ vendor_item.name }}</option>{% endfor %}
                                    </select>
                                </label>
                            </div>
                            <div class="new_item_container_value">
                                <label class="price_once_label">
                                    <input placeholder="цена за 1шт" type="text" class="price_input" />
                                    <div class="error"></div>
                                </label>
                            </div>
                            <div class="new_item_container_value">
                                <label class="quantity_label">
                                    <input placeholder="Количество" type="text" class="quantity_input" />
                                    <div class="error"></div>
                                </label>
                            </div>
                            <div class="new_item_container_value">
                                <div class="new_item_container_value_total_cost">0</div>
                            </div>
                            <div class="new_item_container_value">
                                <div class="new_item_container_value_motrum_price">0</div>
                                <div>
                                    Cкидка
                                    <input class="persent_sale" type="text" placeholder="%" />
                                    %
                                </div>
                            </div>
                            <div class="new_item_container_value">
                                <input class="add_sale" type="text" placeholder="%" />
                                <span>%</span>
                            </div>
                            <div class="new_item_container_value">
                                <label class="new_item_container_value_calendar_label">
                                    <span>Срок поставки</span>
                                    <input class="new_item_container_calendar" type="date" min={{ current_date }} />
                                    <div class="error"></div>
                                </label>
                            </div>
                            <div class="add_new_item_in_cart_container">
                                <button class="add_new_item_in_cart">Добавить товар</button>
                                <div class="add_new_item_in_cart_container_error"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="add_new_product_container">
                    <label class="search_label">
                        <div class="delete_search_details_btn">+</div>
                        <input class="search_input"
                               placeholder="Введите имя или артикул товара"
                               type="text" />
                        <div class="search_container"></div>
                    </label>
                    <div class="add_product_container">
                        <button class="add_product">Добавить этот товар</button>
                        <div class="add_product_error"></div>
                    </div>
                    <button class="add_new_product">Добавить новый товар</button>
                </div>
            </div>
        {% endif %}
        <div class=""></div>
    </div>
{% endblock content %}
