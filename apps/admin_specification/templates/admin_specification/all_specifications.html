{% extends "core/base.html" %}
{% block content %}
    <div class="logout_btn">
        <p>Пользователь: {{ request.user.username }}</p>
        <a href="{% url "user:logout_admin" %}">Выход</a>
    </div>
    <div class="all_specifications_container">
        <div class="bread-crumbs">
            <a href="{% url "admin_specification:categories" %}">Каталог</a>
        </div>
        <h1 class="title">{{ title }}</h1>
        <div class="all_specifications_content">
            <div class="table-titles">
                <div class="table-title">№Документа</div>
                <div class="table-title">Дата создания</div>
                <div class="table-title">Сумма</div>
                <div class="table-title">Статус</div>
                <div class="table-title">Договор</div>
            </div>
            <div class="all_specifications_table">
                {% for specification in specifications %}
                    {% if specification.tag_stop == True %}
                        <div data-status='{{ specification.tag_stop }}' class="table_item">
                            <div class="table_item_value">
                                <a href="{% if specification.file %}{{ specification.file.url }}{% endif %} "
                                   target="_blank"
                                   data-cart-id = "{{ specification.cart}}"
                                   class="table_item_value">{{ specification.pk }}</a>
                                   <input class="cart_id" type="hidden" value={{ specification.cart}}>
                                {% if request.user.is_superuser %}
                                    <br>
                                    <span class="table_item_value_span">Создал: {{ specification.admin_creator }}</span>
                                {% endif %}
                            </div>
                            <div class="table_item_value">{{ specification.date|date:"d.m.Y" }}</div>
                            <div class="table_item_value ">
                                <span class="price">{{ specification.total_amount }}</span> ₽
                            </div>
                            <div class="table_item_value">Статус</div>
                            <div class="table_item_value">Договор</div>
                            
                            <button class="change-specification-button">Редактировать</button>
                            
                            <button class="create-bill-button">Создать счет</button>
                        </div>
                    {% else %}
                        <div data-status='{{ specification.tag_stop }}'
                             class="table_item disabled">
                            <div data-cart-id = "{{ specification.cart}}" class="table_item_value">{{ specification.pk }}</div>
                            <div class="table_item_value">{{ specification.date|date:"d.m.Y" }}</div>
                            <div class="table_item_value ">
                                <span class="price">{{ specification.total_amount }}</span> ₽
                            </div>
                            <div class="table_item_value">Статус</div>
                            <div class="table_item_value">Договор</div>
                            <button class="uptate-specification-button">Актуализировать</button>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock content %}
